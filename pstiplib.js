define("pstiplib",function(){var t=T,e=T.event,i=T.dom,n=T.page;i.getAncestorByClass=i.getAncestorByClass||function(e,i){for(e=t.dom.g(e),i=new RegExp("(^|\\s)"+t.string.trim(i)+"(\\s|$)");(e=e.parentNode)&&1===e.nodeType;)if(i.test(e.className))return e;return null};var r=e._eventFilter=e._eventFilter||{};r._crossElementBoundary=r._crossElementBoundary||function(e,i){var n=i.relatedTarget,r=i.currentTarget;if(n!==!1&&r!==n&&(!n||"xul"!==n.prefix&&!t.dom.contains(r,n)))return e.call(r,i)},T.fn.bind=T.fn.bind||function(e,i){var n=arguments.length>2?[].slice.call(arguments,2):null;return function(){var r=t.lang.isString(e)?i[e]:e,s=n?n.concat([].slice.call(arguments,0)):arguments;return r.apply(i||r,s)}},r.mouseenter=window.attachEvent?null:r.mouseenter||function(e,i,n){return{type:"mouseover",listener:t.fn.bind(r._crossElementBoundary,this,n)}},r.mouseleave=window.attachEvent?null:r.mouseleave||function(i,n,r){return{type:"mouseout",listener:t.fn.bind(e._eventFilter._crossElementBoundary,this,r)}},n.getScrollLeft=n.getScrollLeft||function(){var t=document;return window.pageXOffset||t.documentElement.scrollLeft||t.body.scrollLeft};var s=function(t,e){for(var i=-1,n=0,r=t.length;r>n;n++)if(t[n]===e){i=n;break}return i};T.array.indexOf||(T.array.indexOf=s);var o=function(){this.children=[],this._listners={},this.fire("beforeinit"),this.bindEvents(this.binds),this.init.apply(this,arguments),this.fire("afterinit")};o.prototype={constructor:o,type:"Control",disabled:!1,setOptions:function(t){if(!t)return this.options;var e=T.object,i=this.options=e.clone(this.options),n=/^on[A-Z]/,r=this,s=e.extend;return this.srcOptions=t,e.each(t,function(o,a){if(n.test(a)&&"function"==typeof o){var l=a.charAt(2).toLowerCase()+a.substr(3);r.on(l,o),delete t[a]}else a in i&&(i[a]=e.isPlain(o)?s(i[a]||{},o):o)}),i},bindEvents:function(t){var e=this;t&&t.length&&("string"==typeof t&&(t=t.split(/\s*,\s*/)),T.each(t,function(t,i){i=t&&e[t],i&&(e[t]=function(){return i.apply(e,arguments)})}))},init:function(){throw new Error("not implement init")},render:function(){throw new Error("not implement render")},appendTo:function(t){this.main=t||this.main,this.render()},disable:function(){this.disabled=!0,this.fireEvent("disable")},enable:function(){this.disabled=!1,this.fireEvent("enable")},isDisabled:function(){return this.disabled},addChild:function(t,e){var i=this.children;e=e||t.childName,e&&(i[nane]=t),i.push(t)},removeChild:function(t){T.object.each(this.children,function(e,i){e===t&&delete this[i]})},getChild:function(t){return this.children[t]},initChildren:function(){throw new Error("not implement initChildren")},on:function(t,e){T.isString(t)||(e=t,t="*");var i=this._listners[t]||[];return s(i,e)<0&&(e.$type=t,i.push(e)),this._listners[t]=i,this},un:function(t,e){T.isString(t)||(e=t,t="*");var i=this._listners[t];if(i)if(e){var n=s(i,e);~n&&delete i[n]}else i.length=0,delete this._listners[t];return this},fire:function(t,e){var i=this._listners[t];return i&&T.array.each(i,function(i){e=e||{},e.type=t,i.call(this,e)},this),"*"!==t&&this.fire("*",e),this},dispose:function(){this.fire("dispose");for(var t;t=this.children.pop();)t.dispose();for(var e in this._listners)this.un(e)}};var a=function(t,e){var n=T.event.getTarget(t);return i.hasClass(n,e)||(n=i.getAncestorByClass(n,e))?n:null},l=function(){this.constructor.superClass.constructor.apply(this,arguments)};return l.HIDE_DELAY=500,l.prototype={type:"Tip",options:{disabled:!1,main:"",arrow:!1,hideDelay:0,mode:"over",title:null,content:"",prefix:"ecl-ui-tip",triggers:"tooltips",flag:"_ecui_tips",offset:{x:0,y:0},tpl:'<div class="{prefix}-arrow {prefix}-arrow-top"><em></em><ins></ins></div><div class="{prefix}-title"></div><div class="{prefix}-body"></div>'},binds:"onResize, onDocClick, onShow, onHide, hide",init:function(t){t=this.setOptions(t),t.hideDelay=t.hideDelay<0?l.HIDE_DELAY:t.hideDelay,this.disabled=t.disabled,this.title=t.title,this.content=t.content;var e=t.prefix,i=this.main=document.createElement("div");i.className=e,i.innerHTML=t.tpl.replace(/{prefix}/g,e),i.style.left="-2000px",this.events={over:{on:"mouseenter",un:"mouseleave"},click:{on:"click",un:"click"}}[t.mode]},render:function(){var t=this,e=this.main,i=this.options,n=this.events;if(!this.rendered){this.rendered=!0,document.body.appendChild(e),T.on(e,"click",function(e){t.fire("click",{event:e})}),"over"===this.options.mode&&(T.on(e,"mouseenter",function(){t.clear()}),T.on(e,"mouseleave",function(){t.clear(),t.timer=setTimeout(t.hide,i.hideDelay)}));var r=this.elements={},s=i.prefix+"-";T.each("arrow,title,body".split(","),function(t){r[t]=T.q(s+t,e)[0]}),this.addTriggers(i.triggers)}return!n&&this.triggers&&this.show(this.triggers[0]),this},addTriggers:function(t){var e=this,i=this.options,n=this.events,r=i.flag;this.triggers="string"==typeof t?T.q(i.triggers):t.length?t:[t],n&&T.each(this.triggers,function(t){T.addClass(t,r),T.on(t,n.on,e.onShow)})},refresh:function(){},clear:function(){clearTimeout(this.timer),clearTimeout(this.resizeTimer)},onResize:function(){clearTimeout(this.resizeTimer);var t=this;this.resizeTimer=setTimeout(function(){t.show(t.current)},100)},onDocClick:function(t){var e=this.main,n=T.event.getTarget(t);e===n||~T.array.indexOf(this.triggers,n)||i.contains(e,n)||this.hide()},onShow:function(t){var e=a(t,this.options.flag);if(this.clear(),e&&this.current!==e){var i=this.events;i&&(T.on(e,i.un,this.onHide),T.un(e,i.on,this.onShow),this.current&&(T.on(this.current,i.on,this.onShow),T.un(this.current,i.un,this.onHide)),"click"===this.options.mode&&T.on(document,"click",this.onDocClick)),this.current=e,this.fire("beforeShow",{target:e,event:t}),this.show(e)}},onHide:function(){var t=this.options;this.clear(),t.hideDelay?this.timer=setTimeout(this.hide,t.hideDelay):this.hide()},show:function(t){var e=this.options;this.events;var i=this.elements;this.clear(),this.current=t,T.on(window,"resize",this.onResize),i.title.innerHTML=this.title||"",i.body.innerHTML=this.content,T[this.title?"show":"hide"](i.title),e.arrow||T.hide(i.arrow),this.computePosition(),this.fire("show",{target:t})},hide:function(){var t=this.main,e=this.events,n=this.current;e&&n&&(T.on(n,e.on,this.onShow),T.un(n,e.un,this.onHide),"click"===this.options.mode&&T.un(document,"click",this.onDocClick)),this.clear();var r=this.elements.arrow;i.setStyle(t,"left",-t.offsetWidth-r.offsetWidth),this.current=null,T.un(window,"resize",this.onResize),this.fire("hide")},isVisible:function(){return!!this.current},setTitle:function(t){this.title=t||"";var e=this.elements;e.title.innerHTML=this.title,T[this.title?"show":"hide"](e.title)},setContent:function(t){this.content=t||"",this.elements.body.innerHTML=this.content},computePosition:function(){var t=this.options,e=this.current,r=this.main,s=this.elements.arrow,o=t.arrow,a=i.getPosition(e),l=t.prefix+"-arrow",c=a.top,h=a.left,u=e.offsetWidth,d=e.offsetHeight,f=h+u,p=c+d,m=h+u/2,v=c+d/2,g=r.offsetWidth,y=r.offsetHeight,w=s.firstChild.offsetWidth,b=s.firstChild.offsetHeight,T=n.getScrollTop(),x=n.getScrollLeft(),C=x+n.getViewWidth(),D=T+n.getViewHeight(),_=e.getAttribute("data-tooltips");_&&(o=/[trblc]{2}/.test(_)?_:"1");var E,S;if(o&&"1"!==o)S=o.charAt(0),E=o.charAt(1);else{var L=u>g||h-(g-u)/2>0&&C>=f+(g-u)/2?"c":h+g>C?"r":"l",k=d>y||c-(y-d)/2>0&&D>=p+(y-d)/2?"c":c+y>D?"b":"t";D>=p+b+y?(S="b",E=L):C>=f+g+w?(S="r",E=k):c-y-b>=T?(S="t",E=L):h-g-w>=x&&(S="l",E=k),o=S+E}var H={l:"left",r:"right",t:"top",b:"bottom"},A=t.offset;s.className=l+" "+l+"-"+H[S],w=s.firstChild.offsetWidth,b=s.firstChild.offsetHeight;var O=(g-w)/2,I=(y-b)/2;({t:1,b:1})[S]?(h={l:h,c:m-g/2,r:f-g}[E],c={t:c-b-y-A.y,b:p+b+A.y}[S],i.setStyle(s,"left",{c:O,l:(u-w)/2,r:g-Math.max((u-w)/2,w)}[u>g?"c":E]),i.setStyle(s,"top","")):{l:1,r:1}[S]&&(c={t:c,c:v-y/2,b:p-y}[E],h={l:h-w-g-A.x,r:f+w+A.x}[S],i.setStyle(s,"top",{c:I,t:(d-b)/2,b:y-(d-b)/2}[d>y?"c":E]),i.setStyle(s,"left","")),i.setStyles(r,{left:h,top:c})}},T.inherits(l,o),l});